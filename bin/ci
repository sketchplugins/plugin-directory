#!/usr/bin/env bash

set -e

build() {

if [ "$CONTINUOUS_INTEGRATION" == "true" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ]; then
    npm run build

    echo "Committing..."
    git reset
    git checkout master
    git add README.md plugins.json
    if [ "$(git status --porcelain)" != "" ]; then
        git commit -m "build"
        git push "https://$GITHUB_TOKEN@github.com/$TRAVIS_REPO_SLUG.git"
    fi
fi
}

build
